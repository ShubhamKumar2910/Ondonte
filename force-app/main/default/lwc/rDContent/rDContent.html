<template>
    <template if:true={jobSelected}>
        <template if:true={loaded}>
            <lightning-card>
                <div class="slds-clearfix">
                    <div class=" slds-float_right slds-p-right_large">
                        <div class="slds-button-group" role="group">
                            <button class="slds-button slds-button_neutral" onclick={openSearchModal}
                                disabled={registerBlockerActive}>Search Candidates</button>
                            <button class="slds-button slds-button_neutral" onclick={showPrefModalHandler}
                                disabled={registerBlockerActive}>Pref Candidates</button>
                            <button class="slds-button slds-button_neutral" onclick={openModal}
                                disabled={registerBlockerActive}>Search By Location</button>
                            <button class="slds-button slds-button_neutral" onclick={bulkSmsHandler}
                                disabled={registerBlockerActive}>Send SMS</button>
                            <button class="slds-button slds-button_neutral" onclick={createJobApplicationHandler}
                                disabled={registerBlockerActive}>Create Job
                                Applications</button>
                            <div
                                class="slds-dropdown-trigger slds-dropdown-trigger_click slds-is-open slds-button_last">
                            </div>
                        </div>
                    </div>
                </div>

                <hr style="margin-top: 1%;" />


                <template if:true={smsPopup}>
                    <!-- Modal/Popup Box LWC starts here -->
                    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_medium"
                        aria-labelledby="modal-heading-01" aria-modal="true">
                        <div class="slds-modal__container">


                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-5"
                                style="padding:0%">
                                <iframe src={smsUrl} width="100%" height="700" style="border:none;">
                                </iframe>
                            </div>
                            <div class="slds-modal__footer">

                                <button class="slds-button slds-button_neutral" aria-label="Cancel and close"
                                    onclick={closeSMSPopup} style="margin-left: 5px;">Close</button>

                            </div>
                        </div>
                    </section>
                    <div class="slds-backdrop slds-backdrop_open"></div>
                </template>

                <div
                    style="padding: 1%; display: flex; justify-content: space-between; margin-top: -40px; align-items: center; margin-right: -30px; margin-left: 10px;">
                    <h3 class="slds-text-heading_large" style="display: flex; justify-content: start;">
                        <b style="color: slategrey; font-size:15px; "> Recommended Candidates
                            {recommendedCandidates.length} </b>
                    </h3>
                    <div style="display: flex;">
                        <lightning-input type="text" placeholder="Search" style="margin-top: 7px;"
                            onchange={searchHandler}></lightning-input>
                        <div class="slds-float_right slds-p-right_large">
                            <div class="slds-p-around_large">
                                <div class="slds-button-group " role="group">
                                    <lightning-button variant="neutral" title="first" label="First"
                                        class="slds-float_left" icon-name="utility:chevronleft" icon-position="left"
                                        onclick={handleClick}>
                                    </lightning-button>
                                    <lightning-button variant="neutral" title="Previous" label="Previous"
                                        class="slds-float_left" icon-name="utility:chevronleft" icon-position="left"
                                        onclick={handleClick}>
                                    </lightning-button>
                                    <lightning-button-group>
                                        <template for:each={pagelinks} for:item="page">
                                            <lightning-button key={page} label={page} onclick={handlePage}>
                                            </lightning-button>
                                        </template>
                                    </lightning-button-group>
                                    <lightning-button variant="neutral" title="next" class="slds-float_right"
                                        label="Next" icon-name="utility:chevronright" icon-position="right"
                                        onclick={handleClick}>
                                    </lightning-button>
                                    <lightning-button variant="neutral" title="last" class="slds-float_right"
                                        label="Last" icon-name="utility:chevronright" icon-position="right"
                                        onclick={handleClick}>
                                    </lightning-button>
                                    <div class="slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <div style="margin-top: -4%; padding:2%" class="slds-scrollable_x">

                    <table aria-multiselectable="true"
                        class="slds-table slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols"
                        role="grid"
                        aria-label="Example advanced table of Opportunities in actionable mode with row selected">
                        <thead>
                            <tr class="slds-line-height_reset">
                                <th class="slds-text-align_right slds-cell_action-mode" scope="col" style="width:3rem">
                                    <span id="column-group-header2" class="slds-assistive-text">Choose a row</span>
                                    <div class="slds-th__action slds-th__action_form">
                                        <div class="slds-checkbox">
                                            <lightning-input type="checkbox" value="checkbox-unique-id-298"
                                                checked={allRecommendedSelected} tabindex="0"
                                                aria-labelledby="check-select-all-label column-group-header"
                                                onchange={recommendedSelectAllHandler}>
                                            </lightning-input>
                                        </div>
                                    </div>
                                </th>
                                <th class="slds-text-align_right slds-cell_action-mode" scope="col" style="width:3rem">
                                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                        <span class="slds-assistive-text">Sort by: </span>
                                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                            <span class="slds-truncate" title="Name">Pic</span>
                                        </div>
                                    </a>
                                    <div class="slds-resizable">
                                        <input type="range" aria-label="Name column width"
                                            class="slds-resizable__input slds-assistive-text"
                                            id="cell-resize-handle-539" max="1000" min="10" tabindex="0" />
                                        <span class="slds-resizable__handle">
                                            <span class="slds-resizable__divider"></span>
                                        </span>
                                    </div>
                                </th>
                                <th class="slds-text-align_right slds-cell_action-mode" scope="col" style="width:10rem">
                                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                        <span class="slds-assistive-text">Sort by: </span>
                                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                            <span class="slds-truncate" title="Account Name">Name</span>
                                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                    aria-hidden="true">
                                                    <use
                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                    </use>
                                                </svg>
                                            </span>
                                        </div>
                                    </a>
                                    <div class="slds-resizable">
                                        <input type="range" aria-label="Account Name column width"
                                            class="slds-resizable__input slds-assistive-text"
                                            id="cell-resize-handle-548" max="1000" min="20" tabindex="0" />
                                        <span class="slds-resizable__handle">
                                            <span class="slds-resizable__divider"></span>
                                        </span>
                                    </div>
                                </th>
                                <th class="slds-text-align_right slds-cell_action-mode" scope="col" style="width:5rem">
                                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                        <span class="slds-assistive-text">Sort by: </span>
                                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                            <span class="slds-truncate" title="Account Name">Score</span>
                                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                    aria-hidden="true">
                                                    <use
                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                    </use>
                                                </svg>
                                            </span>
                                        </div>
                                    </a>
                                    <div class="slds-resizable">
                                        <input type="range" aria-label="Close Date column width"
                                            class="slds-resizable__input slds-assistive-text" max="1000" min="20"
                                            tabindex="0" />
                                        <span class="slds-resizable__handle">
                                            <span class="slds-resizable__divider"></span>
                                        </span>
                                    </div>
                                </th>
                                <th class="slds-text-align_right slds-cell_action-mode" scope="col" style="width:16rem">
                                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                        <span class="slds-assistive-text">Sort by: </span>
                                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                            <span class="slds-truncate" title="Account Name">Email</span>
                                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                    aria-hidden="true">
                                                    <use
                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                    </use>
                                                </svg>
                                            </span>
                                        </div>
                                    </a>
                                    <div class="slds-resizable">
                                        <input type="range" aria-label="Account Name column width"
                                            class="slds-resizable__input slds-assistive-text"
                                            id="cell-resize-handle-email2" max="1000" min="20" tabindex="0" />
                                        <span class="slds-resizable__handle">
                                            <span class="slds-resizable__divider"></span>
                                        </span>
                                    </div>
                                </th>
                                <th class="slds-text-align_right slds-cell_action-mode" scope="col" style="width:10rem">
                                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                        <span class="slds-assistive-text">Sort by: </span>
                                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                            <span class="slds-truncate" title="Account Name">Phone</span>
                                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                    aria-hidden="true">
                                                    <use
                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                    </use>
                                                </svg>
                                            </span>
                                        </div>
                                    </a>
                                    <div class="slds-resizable">
                                        <input type="range" aria-label="Account Name column width"
                                            class="slds-resizable__input slds-assistive-text"
                                            id="cell-resize-handle-phone" max="1000" min="20" tabindex="0" />
                                        <span class="slds-resizable__handle">
                                            <span class="slds-resizable__divider"></span>
                                        </span>
                                    </div>
                                </th>
                                <th class="slds-text-align_right slds-cell_action-mode" scope="col" style="width:5rem">
                                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                        <span class="slds-assistive-text">Sort by: </span>
                                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                            <span class="slds-truncate" title="Close Date">Status</span>
                                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                    aria-hidden="true">
                                                    <use
                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                    </use>
                                                </svg>
                                            </span>
                                        </div>
                                    </a>
                                    <div class="slds-resizable">
                                        <input type="range" aria-label="Close Date column width"
                                            class="slds-resizable__input slds-assistive-text"
                                            id="cell-resize-handle-542" max="1000" min="20" tabindex="0" />
                                        <span class="slds-resizable__handle">
                                            <span class="slds-resizable__divider"></span>
                                        </span>
                                    </div>
                                </th>

                                <th class="slds-text-align_right slds-cell_action-mode" scope="col" style="width:8rem">
                                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                        <span class="slds-assistive-text">Sort by: </span>
                                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                            <span class="slds-truncate" title="Confidence">City</span>
                                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                    aria-hidden="true">
                                                    <use
                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                    </use>
                                                </svg>
                                            </span>
                                        </div>
                                    </a>
                                    <div class="slds-resizable">
                                        <input type="range" aria-label="Confidence column width"
                                            class="slds-resizable__input slds-assistive-text"
                                            id="cell-resize-handle-544" max="1000" min="20" tabindex="0" />
                                        <span class="slds-resizable__handle">
                                            <span class="slds-resizable__divider"></span>
                                        </span>
                                    </div>
                                </th>
                                <th class="slds-text-align_right slds-cell_action-mode" scope="col" style="width:5rem">
                                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                                        <span class="slds-assistive-text">Sort by: </span>
                                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                            <span class="slds-truncate" title="Confidence">Action</span>
                                        </div>
                                    </a>
                                    <div class="slds-resizable">
                                        <input type="range" aria-label="Confidence column width"
                                            class="slds-resizable__input slds-assistive-text"
                                            id="cell-resize-handle-554" max="1000" min="20" tabindex="0" />
                                        <span class="slds-resizable__handle">
                                            <span class="slds-resizable__divider"></span>
                                        </span>
                                    </div>
                                </th>
                            </tr>
                        </thead>

                        <tbody class="slds-table slds-table_cell-buffer slds-table_bordered">
                            <template for:each={recordsToDisplay} for:item="con">
                                <tr class="slds-table slds-table_cell-buffer slds-table_bordered" key={con.id}>
                                    <th class="slds-cell_action-mode" scope="col" style="margin: 0px;">
                                        <div>
                                            <lightning-input type="checkbox" data-id={con.id} checked={con.isChecked}
                                                onchange={searchTableRowListener}></lightning-input>
                                        </div>
                                    </th>
                                    <th class="slds-cell_action-mode" scope="col">
                                        <div>
                                            <img style="width: 40px; height:40px; border-radius: 50%;"
                                                src={con.profileId}>
                                        </div>
                                    </th>
                                    <th class="slds-cell_action-mode" scope="col">
                                        <a data-id={con.id} onclick={openCanidateDetailPage}>{con.Name}</a>
                                    </th>
                                    <th>
                                        <div>{con.score}</div>
                                    </th>
                                    <th class="slds-cell_action-mode" scope="col">
                                        <div>{con.email}</div>
                                    </th>
                                    <td role="gridcell" class="slds-cell-edit cellContainer" tabindex="-1"
                                        data-aura-rendered-by="2772:0">
                                        <div>
                                            <lightning-click-to-dial value={con.phone} record-id={con.id}>
                                            </lightning-click-to-dial>
                                        </div>
                                    </td>
                                    <th class="slds-cell_action-mode" scope="col">
                                        <div>{con.candidateStatus}</div>
                                    </th>
                                    <th class="slds-cell_action-mode" scope="col">
                                        <div>{con.endDate}</div>
                                    </th>

                                    <th class="slds-cell_action-mode" scope="col">
                                        <div style="display: flex; justify-content:center;">
                                            <lightning-icon onclick={openSendSmSPopup} data-id={con.id}
                                                icon-name="utility:sms" alternative-text="close" size="small"
                                                style="cursor: pointer; --sds-c-icon-color-foreground-default: #0676CF;">
                                            </lightning-icon>
                                        </div>
                                    </th>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <div>
                    <template if:true={showDoNotHireCandidates}>

                        <div>
                            <h3 class="slds-text-heading_large"
                                style="display: flex; justify-content: start; padding: 1%; margin-top:20px">
                                <b style="color: slategrey; font-size:15px; "> Do Not Hire Candidates
                                    {prefferedCandidates.length}</b>
                            </h3>
                            <lightning-datatable key-field="id" show-row-number-column hide-checkbox-column
                                data={prefferedCandidates} columns={prefTableColumns} onrowaction={handleRowAction}>
                            </lightning-datatable>
                        </div>
                    </template>

                </div>

                <div>

                    <template if:true={isViewOnMapModelOpen}>
                        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_medium"
                            aria-labelledby="modal-heading-01" aria-modal="true">
                            <div class="slds-modal__container">
                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse">
                                    <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>
                                    </svg>
                                    <span class="slds-assistive-text">Cancel and close</span>
                                </button>
                                <div class="slds-modal__header">
                                    <h1 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Candidate
                                        Available</h1>
                                </div>
                                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                    <c-candidate-search-map lat={lat} lang={lang} record-id={recordId}
                                        job-name={jobName} onmapselhandler={mapSelectionHandler}
                                        pre-displayed={getDisplayedCandidates}></c-candidate-search-map>
                                </div>
                                <div class="slds-modal__footer">

                                    <template if:true={showButton}>
                                        <lightning-button style="width: auto; margin-right: 5px;" variant="brand"
                                            label="Add Candidates" title="Filter action" data-id="map"
                                            onclick={handleAddCandidate} class="slds-m-left_x-small"
                                            icon-name="utility:add"></lightning-button>
                                    </template>
                                    <button class="slds-button slds-button_neutral" aria-label="Cancel and close"
                                        onclick={closeModal} style="margin-left: 5px;">Cancel</button>
                                </div>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </template>

                    <template if:true={showPrefCandidates}>
                        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_medium"
                            aria-modal="true">
                            <div class="slds-modal__container">

                                <div class="slds-modal__header">
                                    <h1 class="slds-modal__title slds-hyphenate">Preferred Candidates</h1>
                                </div>
                                <div class="slds-modal__content slds-p-around_medium">
                                    <div style="padding:2%" class="slds-scrollable_x">
                                        <h1
                                            style="text-align: center; color: #ff2727; font-size:18px; margin-bottom:20px">
                                            {duplicacyMsg}</h1>
                                        <table aria-multiselectable="true"
                                            class="slds-table slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols"
                                            role="grid"
                                            aria-label="Example advanced table of Opportunities in actionable mode with row selected">
                                            <thead>
                                                <tr class="slds-line-height_reset">
                                                    <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                        style="width:3rem">
                                                        <span class="slds-assistive-text">Choose a row</span>
                                                        <div class="slds-th__action slds-th__action_form">
                                                            <div class="slds-checkbox">
                                                                <lightning-input type="checkbox"
                                                                    value="checkbox-unique-id-298"
                                                                    checked={isPrefAllSelected} tabindex="0"
                                                                    aria-labelledby="check-select-all-label column-group-header"
                                                                    onchange={prefTableAllSelectedListener}>
                                                                </lightning-input>
                                                            </div>
                                                        </div>
                                                    </th>
                                                    <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                        style="width:4rem">
                                                        <a class="slds-th__action slds-text-link_reset" href="#"
                                                            role="button" tabindex="0">
                                                            <span class="slds-assistive-text">Sort by: </span>
                                                            <div
                                                                class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                                <span class="slds-truncate" title="Name">Pic</span>
                                                            </div>
                                                        </a>
                                                        <div class="slds-resizable">
                                                            <input type="range" aria-label="Name column width"
                                                                class="slds-resizable__input slds-assistive-text"
                                                                max="1000" min="10" tabindex="0" />
                                                            <span class="slds-resizable__handle">
                                                                <span class="slds-resizable__divider"></span>
                                                            </span>
                                                        </div>
                                                    </th>
                                                    <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                        style="width:10rem">
                                                        <a class="slds-th__action slds-text-link_reset" href="#"
                                                            role="button" tabindex="0">
                                                            <span class="slds-assistive-text">Sort by: </span>
                                                            <div
                                                                class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                                <span class="slds-truncate"
                                                                    title="Account Name">Name</span>
                                                                <span
                                                                    class="slds-icon_container slds-icon-utility-arrowdown">
                                                                    <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                                        aria-hidden="true">
                                                                        <use
                                                                            xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                                        </use>
                                                                    </svg>
                                                                </span>
                                                            </div>
                                                        </a>
                                                        <div class="slds-resizable">
                                                            <input type="range" aria-label="Account Name column width"
                                                                class="slds-resizable__input slds-assistive-text"
                                                                max="1000" min="20" tabindex="0" />
                                                            <span class="slds-resizable__handle">
                                                                <span class="slds-resizable__divider"></span>
                                                            </span>
                                                        </div>
                                                    </th>
                                                    <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                        style="width:13rem">
                                                        <a class="slds-th__action slds-text-link_reset" href="#"
                                                            role="button" tabindex="0">
                                                            <span class="slds-assistive-text">Sort by: </span>
                                                            <div
                                                                class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                                <span class="slds-truncate"
                                                                    title="Account Name">Email</span>
                                                                <span
                                                                    class="slds-icon_container slds-icon-utility-arrowdown">
                                                                    <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                                        aria-hidden="true">
                                                                        <use
                                                                            xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                                        </use>
                                                                    </svg>
                                                                </span>
                                                            </div>
                                                        </a>
                                                        <div class="slds-resizable">
                                                            <input type="range" aria-label="Account Name column width"
                                                                class="slds-resizable__input slds-assistive-text"
                                                                max="1000" min="20" tabindex="0" />
                                                            <span class="slds-resizable__handle">
                                                                <span class="slds-resizable__divider"></span>
                                                            </span>
                                                        </div>
                                                    </th>
                                                    <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                        style="width:10rem">
                                                        <a class="slds-th__action slds-text-link_reset" href="#"
                                                            role="button" tabindex="0">
                                                            <span class="slds-assistive-text">Sort by: </span>
                                                            <div
                                                                class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                                <span class="slds-truncate"
                                                                    title="Account Name">Phone</span>
                                                                <span
                                                                    class="slds-icon_container slds-icon-utility-arrowdown">
                                                                    <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                                        aria-hidden="true">
                                                                        <use
                                                                            xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                                        </use>
                                                                    </svg>
                                                                </span>
                                                            </div>
                                                        </a>
                                                        <div class="slds-resizable">
                                                            <input type="range" aria-label="Account Name column width"
                                                                class="slds-resizable__input slds-assistive-text"
                                                                max="1000" min="20" tabindex="0" />
                                                            <span class="slds-resizable__handle">
                                                                <span class="slds-resizable__divider"></span>
                                                            </span>
                                                        </div>
                                                    </th>
                                                    <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                        style="width:5rem">
                                                        <a class="slds-th__action slds-text-link_reset" href="#"
                                                            role="button" tabindex="0">
                                                            <span class="slds-assistive-text">Sort by: </span>
                                                            <div
                                                                class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                                <span class="slds-truncate"
                                                                    title="Confidence">Action</span>
                                                            </div>
                                                        </a>
                                                    </th>
                                                </tr>
                                            </thead>

                                            <tbody class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                <template for:each={job.prefCandidates} for:item="con">
                                                    <tr class="slds-table slds-table_cell-buffer slds-table_bordered"
                                                        key={con.id}>
                                                        <th class="slds-cell_action-mode" scope="col"
                                                            style="margin: 0px;">
                                                            <div>
                                                                <lightning-input type="checkbox" data-id={con.id}
                                                                    checked={con.isChecked}
                                                                    onchange={prefTableRowListener}></lightning-input>
                                                            </div>
                                                        </th>
                                                        <th class="slds-cell_action-mode" scope="col">
                                                            <div>
                                                                <img style="width: 40px; height:40px; border-radius: 50%;"
                                                                    src={con.profileId}>
                                                            </div>
                                                        </th>
                                                        <th class="slds-cell_action-mode" scope="col">
                                                            <a data-id={con.id}
                                                                onclick={openCanidateDetailPage}>{con.Name}</a>
                                                        </th>
                                                        <th class="slds-cell_action-mode" scope="col">
                                                            <div>{con.email}</div>
                                                        </th>
                                                        <td role="gridcell" class="slds-cell-edit cellContainer"
                                                            tabindex="-1" data-aura-rendered-by="2772:0">
                                                            <div>
                                                                <lightning-click-to-dial value={con.phone}
                                                                    record-id={con.id}></lightning-click-to-dial>
                                                            </div>
                                                        </td>
                                                        <th class="slds-cell_action-mode" scope="col">
                                                            <div style="display: flex; justify-content:center;">
                                                                <lightning-icon onclick={sendSMSPopupNewTab}
                                                                    data-id={con.id} icon-name="utility:sms"
                                                                    alternative-text="close" size="small"
                                                                    style="cursor: pointer; --sds-c-icon-color-foreground-default: #355D96;">
                                                                </lightning-icon>
                                                            </div>
                                                        </th>
                                                    </tr>
                                                </template>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="slds-modal__footer">

                                    <template if:true={showPrefSelected}>
                                        <lightning-button style="width: auto; margin-right: 5px;" variant="brand"
                                            label="Add Candidates" title="Filter action" onclick={handleAddCandidate}
                                            data-id="pref" class="slds-m-left_x-small" icon-name="utility:add">
                                        </lightning-button>
                                    </template>
                                    <button class="slds-button slds-button_neutral" aria-label="Cancel and close"
                                        onclick={closePrefHandler} style="margin-left: 5px;">Cancel</button>
                                </div>
                            </div>

                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </template>


                    <template if:true={isViewOnSearchModelOpen}>
                        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_medium"
                            aria-labelledby="modal-heading-02" aria-modal="true">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header">
                                    <h1 id="modal-heading-02" class="slds-modal__title slds-hyphenate">Search Candidates
                                    </h1>
                                </div>

                                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-2">
                                    <div class=" slds-row">
                                        <div style="display: flex; justify-content: space-between;">
                                            <lightning-accordion class="example-accordion"
                                                onsectiontoggle={handleSearchAccordion} active-section-name="B">
                                                <lightning-accordion-section name="B" label="Filter Candidates"
                                                    onclick={handleSearchAccordion}>

                                                </lightning-accordion-section>
                                            </lightning-accordion>

                                            <div class="slds-col slds-size_2-of-8"
                                                style=" margin-left:1%; margin-top: 0.3%;">
                                                <span>
                                                    <lightning-button variant="brand" label="Search Candidate"
                                                        title="Filter action" onclick={handleSearchFilterCandidates}
                                                        class="slds-m-left_x-small" icon-name="utility:search">
                                                    </lightning-button>
                                                </span>
                                            </div>
                                        </div>

                                        <template if:true={openSearchAccordian}>
                                            <div class="slds-form">
                                                <div class="slds-form-element slds-form-element_stacked">
                                                    <label class="slds-form-element__label" for="stacked-input-id-01"
                                                        style="display: flex; justify-content: start; font-weight: bold;">Address</label>
                                                    <div class="slds-form-element__control">
                                                        <input type="text" id="stacked-input-id-01"
                                                            placeholder="Enter City" class="slds-input"
                                                            onchange={handleCityChange} />
                                                    </div>
                                                </div>

                                                <div class="slds-form-element slds-form-element_stacked">
                                                    <label class="slds-form-element__label" for="stacked-input-id-01"
                                                        style="display: flex; justify-content: start; font-weight: bold;">Year
                                                        Of
                                                        Experience</label>
                                                    <lightning-combobox name="progress" value={selectedSearchExperience}
                                                        placeholder="Select Experience" options={experienceList}
                                                        onchange={selectedSearchExperienceHanlder}
                                                        style="display: flex; justify-content: start; justify-items: start;">
                                                    </lightning-combobox>
                                                </div>

                                                <fieldset class="slds-form-element slds-form-element_stacked">
                                                    <legend class="slds-form-element__legend slds-form-element__label">
                                                        Skills
                                                    </legend>
                                                    <lightning-dual-listbox name="languages" label="Select Skills"
                                                        source-label="Available" selected-label="Selected"
                                                        field-level-help="Select skills" options={skillsPicklistValue}
                                                        onchange={handleChange}>
                                                    </lightning-dual-listbox>
                                                </fieldset>

                                                <div style="width: 100%;">
                                                    <label class="slds-form-element__label" for="stacked-input-id-01"
                                                        style="display: flex; justify-content: start; font-weight: bold;">
                                                        Dental Key Skills</label>

                                                    <div class="slds-grid slds-gutters">
                                                        <div class="slds-col">
                                                            <lightning-combobox name="progress"
                                                                class="xray_combobox"
                                                                label="X-ray Proficiency" value={value}
                                                                placeholder="Select" options={xRayPicklistOpt}
                                                                onchange={handleChange}></lightning-combobox>

                                                            <div class="slds-form-element slds-m-top_x-small">
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            id="Invisalign"
                                                                            name="Invisalign__c" class="searchCustomCheckbox"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Invisalign">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Invisalign</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="slds-form-element slds-m-top_x-small">
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                        id="coroPolishing"
                                                                        name="Coronal_Polishing__c" class="searchCustomCheckbox"
                                                                        value="coroPolishing" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="coroPolishing">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Coronal
                                                                                Polishing</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-col">
                                                            <lightning-combobox class="pms_combobox" name="progress" label="PMS Knowledge"
                                                                value={value} placeholder="Select" options={pmsKnowOpt}
                                                                onchange={handleChange}></lightning-combobox>
                                                            <div class="slds-form-element slds-m-top_x-small">
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            id="Intraoral_Camera"
                                                                            name="Intraoral_Camera__c" class="searchCustomCheckbox"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Intraoral_Camera">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Intraoral
                                                                                Camera</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="slds-form-element slds-m-top_x-small">
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            id="fissure_sealant"
                                                                            name="Applying_Pit_Fissure_Sealants__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="fissure_sealant">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Applying
                                                                                Pit/Fissure Sealants</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-col">
                                                            <lightning-combobox class="xRaySoftOpt" name="progress"
                                                                label="Image X-ray Software"
                                                                placeholder="Select" options={xRaySoftOpt}
                                                                onchange={handleChange}></lightning-combobox>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div style="width: 100%;" class="slds-m-top_small">
                                                    <label class="slds-form-element__label" for="stacked-input-id-01"
                                                        style="display: flex; justify-content: start; font-weight: bold;">
                                                        Assistant Key Skills</label>

                                                    <div class="slds-grid slds-gutters">
                                                        <div class="slds-col">

                                                            <div class="slds-form-element slds-m-top_x-small">
                                                                <div class="slds-form-element__control">
                                                                    <fieldset
                                                                        class="slds-form-element slds-form-element_stacked">
                                                                        <lightning-dual-listbox name="languages"
                                                                            label="Types of crowns"
                                                                            source-label="Available"
                                                                            selected-label="Selected"
                                                                            field-level-help="Types of crowns"
                                                                            options={crownsType}
                                                                            onchange={crownSelectedListener}>
                                                                        </lightning-dual-listbox>
                                                                    </fieldset>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-col">
                                                            <div class="slds-form-element slds-m-top_x-small">
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            id="Fabricate_and_Place_Temporary_Crowns__c"
                                                                            class="searchCustomCheckbox"
                                                                            name="Fabricate_and_Place_Temporary_Crowns__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Fabricate_and_Place_Temporary_Crowns__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Fabricate
                                                                                and Place Temporary Crowns</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                        id="Implants__c"
                                                                         class="searchCustomCheckbox"
                                                                            name="Implants__c"
                                                                            value="coroPolishing" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Implants__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Implants</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                        id="Scan_Imaging__c"
                                                                         class="searchCustomCheckbox"
                                                                            name="Scan_Imaging__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Scan_Imaging__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span class="slds-form-element__label">Scan
                                                                                Imaging</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                        id="Cerec__c"
                                                                         class="searchCustomCheckbox"
                                                                            name="Cerec__c"
                                                                            value="coroPolishing" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Cerec__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Cerec</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="E4D__c"
                                                                            id="E4D__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="E4D__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">E4D</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="OMSA_Permit__c"
                                                                            id="OMSA_Permit__c" value="coroPolishing" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="OMSA_Permit__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span class="slds-form-element__label">OMSA
                                                                                Permit</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="Orthodontic_Assistant_Permit__c"
                                                                            id="Orthodontic_Assistant_Permit__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Orthodontic_Assistant_Permit__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Orthodontic
                                                                                Assistant Permit</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="Zoom_Bleaching__c"
                                                                            id="Zoom_Bleaching__c"
                                                                            value="coroPolishing" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Zoom_Bleaching__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span class="slds-form-element__label">Zoom
                                                                                Bleaching</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="Inventory_Control_Ordering__c"
                                                                            id="Inventory_Control_Ordering__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Inventory_Control_Ordering__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Inventory
                                                                                Control Ordering</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-col">

                                                        </div>
                                                    </div>
                                                </div>


                                                <div style="width: 100%;" class="slds-m-top_small">
                                                    <label class="slds-form-element__label" for="stacked-input-id-01"
                                                        style="display: flex; justify-content: start; font-weight: bold;">
                                                        Hygienist Key Skills</label>

                                                    <div class="slds-grid slds-gutters">

                                                        <div class="slds-col">
                                                            <div class="slds-form-element slds-m-top_x-small">
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="Assisted_Hygiene__c"
                                                                            id="Assisted_Hygiene__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Assisted_Hygiene__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Assisted
                                                                                Hygiene</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            name="Arestin__c"
                                                                            class="searchCustomCheckbox" id="Arestin__c"
                                                                            value="coroPolishing" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Arestin__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Arestin</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            name="Loupes__c"
                                                                            class="searchCustomCheckbox" id="Loupes__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Loupes__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Loupes</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="Fluoride_Varnish__c"
                                                                            id="Fluoride_Varnish__c"
                                                                            value="coroPolishing" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Fluoride_Varnish__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Fluoride
                                                                                Varnish</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="Digital_Perio_Charting__c"
                                                                            id="Digital_Perio_Charting__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Digital_Perio_Charting__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Digital
                                                                                Perio Charting</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-col">
                                                            <div class="slds-form-element slds-m-top_x-small">
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="Laser_Curettage__c"
                                                                            id="Laser_Curettage__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Laser_Curettage__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span class="slds-form-element__label">Laser
                                                                                Curettage</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="Assist_w_Nitrous_Administration__c"
                                                                            id="Assist_w_Nitrous_Administration__c"
                                                                            value="coroPolishing" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Assist_w_Nitrous_Administration__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Assist
                                                                                Nitrous Administration</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="Chairside_Scheduling__c"
                                                                            id="Chairside_Scheduling__c"
                                                                            value="checkbox-unique-id-81" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Chairside_Scheduling__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Chairside
                                                                                Scheduling</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            name="Micro_Ultrasonic__c"
                                                                            id="Micro_Ultrasonic__c"
                                                                            value="coroPolishing" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Micro_Ultrasonic__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span class="slds-form-element__label">Micro
                                                                                Ultrasonic</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="slds-checkbox">
                                                                        <input type="checkbox"
                                                                            class="searchCustomCheckbox"
                                                                            id="Treatment_Planning__c"
                                                                            name="Treatment_Planning__c"
                                                                            value="coroPolishing" />
                                                                        <label class="slds-checkbox__label"
                                                                            for="Treatment_Planning__c">
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span
                                                                                class="slds-form-element__label">Treatment
                                                                                Planning</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <c-partial-search-comp></c-partial-search-comp>
                                            </div>
                                        </template>

                                        <template if:true={filteredSearchConList}>
                                            <b
                                                style="display: flex; justify-content: start; margin-top: 2%; color: cornflowerblue;">Filtered
                                                Candidates {filteredSearchConList.length}</b>
                                        </template>
                                        <template for:each={filteredSearchConList} for:item="contact">

                                            <div key={contact.id} data-id={contact.id} class="slds-box"
                                                style="margin-top:1%; align-items: center;">
                                                <div class="slds-card__header slds-grid slds-p-around_none"
                                                    style="margin: auto;">
                                                    <header
                                                        class="slds-media slds-media_center slds-has-flexi-truncate">
                                                        <div class="slds-media__figure">
                                                            <span class="slds-avatar slds-avatar_profile-image-large">
                                                                <span class="slds-assistive-text">Person name</span>
                                                            </span>

                                                        </div>
                                                        <div class="slds-media__body slds-grid slds-gutters">
                                                            <div class="slds-size_7-of-8 slds-row"
                                                                style="margin-left: 2%;">
                                                                <h2 class="slds-card__header-title">
                                                                    <a href="#"
                                                                        class="slds-card__header-link slds-truncate"
                                                                        title="Accounts">
                                                                        <span>{contact.Name}</span>
                                                                    </a>
                                                                </h2>
                                                                <template if:true={contact.distance}>
                                                                    <p data-formats="#0.0"
                                                                        style="size: 1em; display: flex; justify-content: start;">
                                                                        {contact.distance} Km</p>
                                                                </template>
                                                            </div>
                                                            <div class="slds-size_1-of-8"
                                                                style="display: flex; justify-content: center;">
                                                                <input type="checkbox" name={contact.id}
                                                                    value="checkbox-unique-id-81"
                                                                    onclick={handleCheckBox} />
                                                            </div>
                                                        </div>
                                                    </header>
                                                </div>
                                                <template if:true={contact.description}>
                                                    <div class="slds-card__body slds-card__body_inner">
                                                        {contact.description}</div>
                                                </template>
                                                <footer class="slds-card__footer">
                                                </footer>
                                            </div>
                                        </template>
                                    </div>
                                </div>

                                <div class="slds-modal__footer">
                                    <template if:true={showAddCandidateButtonInSearch}>
                                        <lightning-button style="width: auto; margin-right: 5px;" variant="brand"
                                            label="Add Candidates" title="Filter action" data-id="search"
                                            onclick={handleAddCandidate} class="slds-m-left_x-small"
                                            icon-name="utility:add"></lightning-button>
                                    </template>
                                    <button class="slds-button slds-button_neutral" aria-label="Cancel and close"
                                        onclick={closeSearchModal} style="margin-left: 5px;">Cancel</button>
                                </div>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </template>

                    <hr />

                    <div style="margin-top: -3%;">
                        <template if:true={showBottomTable}>
                            <div slot="footer">
                                <div
                                    style="padding: 1%;  display: flex; justify-content: space-between; margin-top: 3%; align-items: center;">

                                    <h3 class="slds-text-heading_large" style="display: flex; justify-content: start;">
                                        <b style="color: slategrey; font-size:15px; "> Searched Candidates
                                            {selectedContacts.length} </b>
                                    </h3>
                                    <div>
                                        <div class="slds-float_right slds-p-right_large">
                                            <div class="slds-p-around_large">
                                                <div class="slds-button-group " role="group">
                                                    <lightning-button variant="neutral" title="first" label="First"
                                                        class="slds-float_left" icon-name="utility:chevronleft"
                                                        icon-position="left" onclick={handleClick}>
                                                    </lightning-button>
                                                    <lightning-button variant="neutral" title="Previous"
                                                        label="Previous" class="slds-float_left"
                                                        icon-name="utility:chevronleft" icon-position="left"
                                                        onclick={handleClick}></lightning-button>
                                                    <lightning-button-group>
                                                        <template for:each={pagelinks} for:item="page">
                                                            <lightning-button key={page} label={page}
                                                                onclick={handlePage}>
                                                            </lightning-button>
                                                        </template>
                                                    </lightning-button-group>
                                                    <lightning-button variant="neutral" title="next"
                                                        class="slds-float_right" label="Next"
                                                        icon-name="utility:chevronright" icon-position="right"
                                                        onclick={handleClick}>
                                                    </lightning-button>
                                                    <lightning-button variant="neutral" title="last"
                                                        class="slds-float_right" label="Last"
                                                        icon-name="utility:chevronright" icon-position="right"
                                                        onclick={handleClick}>
                                                    </lightning-button>
                                                    <div
                                                        class="slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="margin-top: -2%;">

                                    <table aria-multiselectable="true"
                                        class="slds-table slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols"
                                        role="grid"
                                        aria-label="Example advanced table of Opportunities in actionable mode with row selected">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                    style="width:3rem">
                                                    <span class="slds-assistive-text">Choose a BoW</span>
                                                    <div class="slds-th__action slds-th__action_form">
                                                        <div class="slds-checkbox">
                                                            <lightning-input type="checkbox"
                                                                onchange={searchedSelectAllHandler}
                                                                checked={isAllSearchSelected}
                                                                aria-labelledby="check-select-all-label column-group-header">
                                                            </lightning-input>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                    style="width:4.5rem">
                                                    <a class="slds-th__action slds-text-link_reset" href="#"
                                                        role="button" tabindex="0">
                                                        <span class="slds-assistive-text">Sort by: </span>
                                                        <div
                                                            class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                            <span class="slds-truncate" title="Name">Profile</span>
                                                        </div>
                                                    </a>
                                                    <div class="slds-resizable">
                                                        <input type="range" aria-label="Name column width"
                                                            class="slds-resizable__input slds-assistive-text" max="1000"
                                                            min="10" tabindex="0" />
                                                        <span class="slds-resizable__handle">
                                                            <span class="slds-resizable__divider"></span>
                                                        </span>
                                                    </div>
                                                </th>
                                                <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                    style="width:13rem">
                                                    <a class="slds-th__action slds-text-link_reset" href="#"
                                                        role="button" tabindex="0">
                                                        <span class="slds-assistive-text">Sort by: </span>
                                                        <div
                                                            class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                            <span class="slds-truncate" title="Account Name">Name</span>
                                                            <span
                                                                class="slds-icon_container slds-icon-utility-arrowdown">
                                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                                    aria-hidden="true">
                                                                    <use
                                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                                    </use>
                                                                </svg>
                                                            </span>
                                                        </div>
                                                    </a>
                                                    <div class="slds-resizable">
                                                        <input type="range" aria-label="Account Name column width"
                                                            class="slds-resizable__input slds-assistive-text" max="1000"
                                                            min="20" tabindex="0" />
                                                        <span class="slds-resizable__handle">
                                                            <span class="slds-resizable__divider"></span>
                                                        </span>
                                                    </div>
                                                </th>
                                                <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                    style="width:13rem">
                                                    <a class="slds-th__action slds-text-link_reset" href="#"
                                                        role="button" tabindex="0">
                                                        <span class="slds-assistive-text">Sort by: </span>
                                                        <div
                                                            class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                            <span class="slds-truncate"
                                                                title="Account Name">Email</span>
                                                            <span
                                                                class="slds-icon_container slds-icon-utility-arrowdown">
                                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                                    aria-hidden="true">
                                                                    <use
                                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                                    </use>
                                                                </svg>
                                                            </span>
                                                        </div>
                                                    </a>
                                                    <div class="slds-resizable">
                                                        <input type="range" aria-label="Account Name column width"
                                                            class="slds-resizable__input slds-assistive-text" max="1000"
                                                            min="20" tabindex="0" />
                                                        <span class="slds-resizable__handle">
                                                            <span class="slds-resizable__divider"></span>
                                                        </span>
                                                    </div>
                                                </th>
                                                <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                    style="width:10rem">
                                                    <a class="slds-th__action slds-text-link_reset" href="#"
                                                        role="button" tabindex="0">
                                                        <span class="slds-assistive-text">Sort by: </span>
                                                        <div
                                                            class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                            <span class="slds-truncate"
                                                                title="Account Name">Phone</span>
                                                            <span
                                                                class="slds-icon_container slds-icon-utility-arrowdown">
                                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                                    aria-hidden="true">
                                                                    <use
                                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                                    </use>
                                                                </svg>
                                                            </span>
                                                        </div>
                                                    </a>
                                                    <div class="slds-resizable">
                                                        <input type="range" aria-label="Account Name column width"
                                                            class="slds-resizable__input slds-assistive-text" max="1000"
                                                            min="20" tabindex="0" />
                                                        <span class="slds-resizable__handle">
                                                            <span class="slds-resizable__divider"></span>
                                                        </span>
                                                    </div>
                                                </th>
                                                <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                    style="width:10rem">
                                                    <a class="slds-th__action slds-text-link_reset" href="#"
                                                        role="button" tabindex="0">
                                                        <span class="slds-assistive-text">Sort by: </span>
                                                        <div
                                                            class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                            <span class="slds-truncate" title="Close Date">Status</span>
                                                            <span
                                                                class="slds-icon_container slds-icon-utility-arrowdown">
                                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                                    aria-hidden="true">
                                                                    <use
                                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                                    </use>
                                                                </svg>
                                                            </span>
                                                        </div>
                                                    </a>
                                                    <div class="slds-resizable">
                                                        <input type="range" aria-label="Close Date column width"
                                                            class="slds-resizable__input slds-assistive-text" max="1000"
                                                            min="20" tabindex="0" />
                                                        <span class="slds-resizable__handle">
                                                            <span class="slds-resizable__divider"></span>
                                                        </span>
                                                    </div>
                                                </th>
                                                <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                    style="width:10rem">
                                                    <a class="slds-th__action slds-text-link_reset" href="#"
                                                        role="button" tabindex="0">
                                                        <span class="slds-assistive-text">Sort by: </span>
                                                        <div
                                                            class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                            <span class="slds-truncate" title="Stage">Desired Pay</span>
                                                            <span
                                                                class="slds-icon_container slds-icon-utility-arrowdown">
                                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                                    aria-hidden="true">
                                                                    <use
                                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                                    </use>
                                                                </svg>
                                                            </span>
                                                        </div>
                                                    </a>
                                                    <div class="slds-resizable">
                                                        <input type="range" aria-label="Stage column width"
                                                            class="slds-resizable__input slds-assistive-text" max="1000"
                                                            min="20" tabindex="0" />
                                                        <span class="slds-resizable__handle">
                                                            <span class="slds-resizable__divider"></span>
                                                        </span>
                                                    </div>
                                                </th>
                                                <th class="slds-text-align_right slds-cell_action-mode" scope="col"
                                                    style="width:10rem">
                                                    <a class="slds-th__action slds-text-link_reset" href="#"
                                                        role="button" tabindex="0">
                                                        <span class="slds-assistive-text">Sort by: </span>
                                                        <div
                                                            class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                                            <span class="slds-truncate" title="Confidence">City</span>
                                                            <span
                                                                class="slds-icon_container slds-icon-utility-arrowdown">
                                                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                                                    aria-hidden="true">
                                                                    <use
                                                                        xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown">
                                                                    </use>
                                                                </svg>
                                                            </span>
                                                        </div>
                                                    </a>
                                                    <div class="slds-resizable">
                                                        <input type="range" aria-label="Confidence column width"
                                                            class="slds-resizable__input slds-assistive-text" max="1000"
                                                            min="20" tabindex="0" />
                                                        <span class="slds-resizable__handle">
                                                            <span class="slds-resizable__divider"></span>
                                                        </span>
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>

                                        <tbody class="slds-table slds-table_cell-buffer slds-table_bordered">
                                            <template for:each={selectedContacts} for:item="con">
                                                <tr class="slds-table slds-table_cell-buffer slds-table_bordered"
                                                    key={con.id}>
                                                    <th class="slds-cell_action-mode" scope="col">
                                                        <div>
                                                            <lightning-input type="checkbox" data-id={con.id}
                                                                checked={con.checked}
                                                                onchange={searchTableRowSelectedListener}>
                                                            </lightning-input>
                                                        </div>
                                                    </th>
                                                    <th class="slds-cell_action-mode" scope="col">
                                                        <div>
                                                            <img style="width: 40px; height:40px; border-radius: 50%;"
                                                                src={con.profileId}>
                                                        </div>
                                                    </th>
                                                    <th class="slds-cell_action-mode" scope="col">
                                                        <a data-id={con.id}
                                                            onclick={openCanidateDetailPage}>{con.Name}</a>
                                                    </th>
                                                    <th class="slds-cell_action-mode" scope="col">
                                                        <div>{con.email}</div>
                                                    </th>
                                                    <th class="slds-cell_action-mode" scope="col">
                                                        <lightning-click-to-dial value={con.phone} record-id={con.id}>
                                                        </lightning-click-to-dial>
                                                        <!-- <div>{con.phone} <lightning-icon icon-name="utility:call" size="x-small" style="cursor:pointer;">
                                                                </lightning-icon>
                                                            </div> -->
                                                    </th>
                                                    <th class="slds-cell_action-mode" scope="col">
                                                        <div>{con.startDate}</div>
                                                    </th>
                                                    <th class="slds-cell_action-mode" scope="col">
                                                        <div>{con.endDate}</div>
                                                    </th>
                                                    <th class="slds-cell_action-mode" scope="col">
                                                        <div>{con.Status__c}</div>
                                                    </th>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </template>

                        <br />
                    </div>

                </div>

            </lightning-card>
        </template>
        <template if:false={loaded}>
            <lightning-spinner alternative-text="Loading"></lightning-spinner>
        </template>

    </template>
</template>